Quest: JHMG113
DisplayName: Блуждающий атронах
-- Message panels
QRC:

QuestorOffer:  [1000]
<ce> Один из наших экспериментов, кажется,
<ce> прогуливается по другому городу. Он
<ce> не причиняет вреда, но нам бы
<ce> хотелось его вернуть. Не могли бы вы
<ce> помочь нам и отыскать его?
   <--->
<ce> Вот в чем дело: недоучившийся студент
<ce> отправил атронаха в прогулку без
<ce> заклинания привязки и умудрился забыть о
<ce> его существовании до самого возвращения в
<ce> учебное заведение. Если вы в ближайшее
<ce> время планируете отправиться в путь, вы
<ce> бы не могли заодно забрать нашего беглеца?

RefuseQuest:  [1001]
<ce> Работа не из сложных, поверьте.

AcceptQuest:  [1002]
<ce> Отлично. Атронах замечен в ___city_. Он, к счастью,
<ce> избегает живых существ, так что чтобы привлечь его
<ce> внимание, вам потребуется что-то знакомое. Вот этот
<ce> фрагмент _elem_, он должен пробудить в нем
<ce> узнавание. Достаточно будет одного крепкого удара,
<ce> и атронах оглушится настолько, что последует за
<ce> вами. Может показаться, что он замер, но не
<ce> волнуйтесь, он программирован подчиняться. Со
<ce> временем он поддастся. Верните его сюда за =timer_
<ce> дней, и мы сможем его переработать. За ваш труд мы
<ce> выплатим вам =reward_ золотых. Всего доброго.

QuestFail:  [1003]
<ce> Ваше задание доставить атронаха обратно к
<ce> ___qgiver_ исчерпало себя.

QuestComplete:  [1004]
<ce> Атронах, все еще слегка ошеломленный,
<ce> следует за вами.
<ce>
<ce> "Ну вот, весьма убедительно. Спасибо вам,
<ce> %pcf. Кажется, ничего серьезного с ним не
<ce> случилось. Мы уже знаем, что будем делать
<ce> дальше. _stud_, прошу".
<ce>
<ce> Студент подходит с каким-то волшебным
<ce> устройством и уводит атронаха в другое
<ce> помещение, игнорируя его слабые жалобы.
<ce> После короткого светового всплеска и
<ce> шипения _qgiver_ с благодарностью вручает
<ce> вам заслуженное вознаграждение и
<ce> возвращается к своим обычным делам.

RumorsDuringQuest:  [1005]
Какой-то атронах бродил по улицам ___city_.
   <--->
Ты слышал об атронахе, которого потеряла Гильдия Магов?

Message:  1010
<ce> Где-то по этим улицам бродит атронах.
<ce> Тебе придется как-то его найти.
<ce>
<ce> В окружающем воздухе ощущаются очень тонкие чары,
<ce> вероятно, из-за блужданий атронаха. Возможно, вы
<ce> могли бы использовать эту магию себе на пользу, чтобы
<ce> чтобы привлечь его к себе. Вы пытаетесь (да) или ждете,
<ce> пока он придет к вам сам (нет)?
<ce>
<ce> (ПРОВЕРКА НАВЫКА: ДА: Мистицизм, низкая сложность)

Message:  1011
<ce> (ПРОВЕРКА НАВЫКА ПРОЙДЕНА)
<ce>
<ce> Вы начинаете работать, и вам удается
<ce> притянуть поток магии к себе.

Message:  1012
<ce> Нечеловеческий вой возвещает о присутствии
<ce> пропавшего атронаха. Он, спотыкаясь, направляется
<ce> к вам, узнавая знакомый _elem_.
<ce>
<ce> "Оставь меня", - стонет он.
   <--->
<ce> Нечеловеческий вой возвещает о присутствии
<ce> пропавшего атронаха. Он, спотыкаясь, направляется
<ce> к вам, узнавая знакомый _elem_.
<ce>
<ce> "Не забирай меня обратно", - стонет он.

Message:  1013
<ce> Одним ударом атронаху, кажется,
<ce> стирают разум. Если то, что сказал вам
<ce> _qgiver_, правда, он должно следовать
<ce> за _elem_, который вам дали, как
<ce> только он придёт в себя. Сейчас самое
<ce> время вернуться к ___qgiver_.

Message:  1014
<ce> (ПРОВЕРКА НАВЫКА ПРОВАЛЕНА)
<ce>
<ce> Вы пытаетесь манипулировать магией в своих интересах.
<ce> Что бы вы в конечном итоге ни делали, это привлекает
<ce> внимание атронаха, но он сердится.

Message:  1015
<ce> Это простая задача. Пока вы остаетесь на улицах,
<ce> вы найдете его. Нет необходимости все усугублять.

Message:  1020
<ce> Атронах мертв, и вы потерпели неудачу.

Message:  1030
%qdt:
 _qgiver_ из Гильдии Магов
 поручил мне привести атронаха,
 блуждающего по ___city_,
 обратно в ___qgiver_. Мне
 заплатят =reward_ золотых,
 если я сделаю это в течение
 =timer_ дней. Для этого мне
 нужно ударить его, но я не
 должен его уничтожать.

QBN:
Item _elem_ element
Item _reward_ gold

Person _qgiver_ group Questor male
Person _stud_ faction The_Mages_Guild

Place _city_ remote tavernhome

Foe _atr_ is Ice_atronach

Clock _timer_ 00:00 0 flag 17 range 0 2
Clock _find_ 00:06 00:22

--	Quest start-up:
    start timer _timer_
    pc at _city_ set _arrival_
    log 1030 step 0
    get item _elem_

_arrival_ task:
    prompt 1010 yes _attempt_ no _flee_

variable _attempt_

_skilled_ task:
    when skill Mysticism is at least 25

_easywin_ task:
    when _attempt_ and _skilled_
    say 1011
    start task _find_

_bigfail_ task:
    when _attempt_ and not _skilled_
    say 1014
    start task _badfind_

_flee_ task:
    say 1015
    start timer _find_

_stop_ task:
    when not _arrival_
    stop timer _find_

_find_ task:
    say 1012
    create foe _atr_ every 0 minutes 1 times with 100% success
    restrain foe _atr_

_badfind_ task:
    say 1012
    create foe _atr_ every 0 minutes 1 times with 100% success
    cast Feet_of_Notorgo spell on _atr_
    cast Orc_Strength spell on _atr_

_fail_ task:
    killed _atr_
    say 1020
    end quest

_stun_ task:
    injured _atr_
    clicked foe _atr_
    say 1013
    remove foe _atr_

_qgclicked_ task:
    clicked npc _qgiver_

_clearclick_ task:
    when _qgclicked_ and not _stun_
    clear _qgclicked_ _clearclick_

_pcreward_ task:
    when _qgclicked_ and _stun_
    take _elem_ from pc
    give pc _reward_
    end quest

_timer_ task:
    say 1003
    end quest